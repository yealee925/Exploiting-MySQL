# Exploiting-MySQL

## Objective
The Detection Lab project aimed to establish a controlled environment for simulating and detecting cyber attacks. The primary focus was to ingest and analyze logs within a Security Information and Event Management (SIEM) system, generating test telemetry to mimic real-world attack scenarios. This hands-on experience was designed to deepen understanding of network security, attack patterns, and defensive strategies.

### Skills Learned
- Advanced understanding of SIEM concepts and practical application.
- Proficiency in analyzing and interpreting network logs.
- Ability to generate and recognize attack signatures and patterns.
- Enhanced knowledge of network protocols and security vulnerabilities.
- Development of critical thinking and problem-solving skills in cybersecurity.

### Tools Used
- Metasploit to gather information
- Security Information and Event Management (SIEM) system for log ingestion and analysis.
- Network analysis tools (such as Wireshark) for capturing and examining network traffic.
- Telemetry generation tools to create realistic network traffic and attack scenarios.

## Steps
- Assume that credentials had been found already --> Username [root] Password [password]
1. Open the terminal to install MySQL on the system using the command **sudo apt install default-mysql-client**. May be prompted if you want to continue to download, type Y for yes

   ![image](https://github.com/user-attachments/assets/03105bf7-6ac8-412a-a8cb-f101ab74f367)
2. Run a thorough port scan using the **nmap** command and the target's IP address (10.10.84.169) to see what ports are open


3. Double-check that the credentials found previously are correct by using the credentials to log into the MySQL server. Start by inputting the command **mysql -h 10.10.84.169** and then use **password** for the password
  
   ![image](https://github.com/user-attachments/assets/3acc1058-dc65-4008-83e7-f90207464b89)
4. Not that it has worked, **exit** MySQL and load up Metasploit using the command **msfconsole**

   ![image](https://github.com/user-attachments/assets/aa3a7fb1-71d7-4bab-94f3-bfd4dbb891c0)
5. Now we will be gathering information. First, we will use mysql_sql module, so insert **search mysql_sql**. Interact with the specific module by using one of the commands provided to you

   ![image](https://github.com/user-attachments/assets/9969f524-c3e7-4bd4-99e6-c3eed307eec2)
6. List the options using **options**

   ![image](https://github.com/user-attachments/assets/7addef4c-9f40-484d-8415-04fb35bd2795)
7. Some of the values have empty current settings (PASSWORD, RHOSTS, USERNAME), so you need to set them. Set the target's IP address for RHOSTS and the previous credentials for the other two values
  
   ![image](https://github.com/user-attachments/assets/9d278e1a-9cc2-47c8-9dc5-2129c466e1f6)
10. Double-check that everything has been filled correctly, using **options** to see the options once more
   
12. ![image](https://github.com/user-attachments/assets/39c1f6fd-3278-450d-a8d3-1c0aaed0cfcf)
13. Execute the exploit by inputting **run**. Since the SQL's current setting wasn't changed, by default it will run the **select version()** command

    ![image](https://github.com/user-attachments/assets/1ef3b22e-393a-4513-be16-5051b240b96a)
14. Change the SQL's current setting by setting it to **show databases**

    ![image](https://github.com/user-attachments/assets/fcbddae1-3c35-4f76-90c9-bc8749ed3da2)
    - There are four databases
16. Now move to the mysql_schemadump module by searching for it. Then interact with the module using one of the commands

    ![image](https://github.com/user-attachments/assets/9f3d707b-5fb4-4dc0-951c-a8e2f6bbec3a)
17. Then list the **options**. The same values' current settings are empty, so set the same values as previously

    ![image](https://github.com/user-attachments/assets/377a67d8-d5dc-4833-82b6-270e9f44d1f2)
18. **run** the exploit to see the dumped tables and column names of the whole database
    
    ![image](https://github.com/user-attachments/assets/54d4dda2-e396-4b0b-b2ed-5e31d5417c47)
20. Moving on, search for the **mysql_hashdump** and repeat the same steps as the previous and then **run** the exploit to see users' password hashes

    ![image](https://github.com/user-attachments/assets/bd0abfac-8e07-469d-9541-66c9bf4549ae)
    ![image](https://github.com/user-attachments/assets/846bd67d-26e3-4af5-b1bb-3b9355afa886)
    ![image](https://github.com/user-attachments/assets/6b5850e2-f13f-4a7f-b6ca-bdf67dff8ae5)
    - The user that interests us is *carl* as we already have access to the root account
21. Let's save carl's password hash by saving it into a file titled hash.txt. Start by copying carl's line (including carl) and inputting the command **nano** to create a file, then paste the hash

    ![image](https://github.com/user-attachments/assets/0541cfc6-f043-4b69-9d6a-ed1515ef8eb3)
22. Select Crtl+o to name the file (bottom of the window) and name the file as _hash.txt_ and select Enter

    ![image](https://github.com/user-attachments/assets/5f919e0f-4b5b-4da7-95a6-8af8c7e75843)
23. Select Crtl+x to exit out of the nano window and use the **exit** command to exit out of Metasploit. Type _john hash.txt_ to use John the Ripper to crack the password

    ![image](https://github.com/user-attachments/assets/29d1a4a1-b228-4daa-97e8-10f2f541f515)
    - The password is doggie
25. There's a possibility that Carl may reuse is password, so attempt to login 









 

